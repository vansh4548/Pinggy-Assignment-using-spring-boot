(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2936:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(6974)}])},3054:e=>{e.exports={container:"PostList_container__SU0fu",header:"PostList_header__Xza4m",loading:"PostList_loading__UaQZa",error:"PostList_error__pQfQO",list:"PostList_list__A_f9L",post:"PostList_post__iejJo"}},6974:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(7876),i=s(4232),o=s(9320),n=s.n(o);function a(e){let{onNewPost:t}=e,[s,o]=(0,i.useState)({title:"",body:"",authCode:""}),[a,l]=(0,i.useState)(null),[d,h]=(0,i.useState)(!1),c=e=>{o({...s,[e.target.id]:e.target.value})},u=async e=>{e.preventDefault(),l(null),h(!0);try{let e=await fetch("/api/post",{method:"POST",headers:{"Content-Type":"application/json",PinggyAuthHeader:s.authCode},body:JSON.stringify({title:s.title,body:s.body})});if(!e.ok)throw Error(e.statusText||"Submission failed");let r=await e.json();t(r),o({title:"",body:"",authCode:""})}catch(e){l(e.message)}finally{h(!1)}};return(0,r.jsxs)("div",{className:n().container,children:[(0,r.jsx)("h2",{children:"Create Post"}),a&&(0,r.jsx)("div",{className:n().error,children:a}),(0,r.jsxs)("form",{onSubmit:u,children:[(0,r.jsxs)("div",{className:n().formGroup,children:[(0,r.jsx)("label",{htmlFor:"title",children:"Title"}),(0,r.jsx)("input",{type:"text",id:"title",value:s.title,onChange:c,required:!0})]}),(0,r.jsxs)("div",{className:n().formGroup,children:[(0,r.jsx)("label",{htmlFor:"body",children:"Content"}),(0,r.jsx)("textarea",{id:"body",value:s.body,onChange:c,required:!0})]}),(0,r.jsxs)("div",{className:n().formGroup,children:[(0,r.jsx)("label",{htmlFor:"authCode",children:"Auth Code"}),(0,r.jsx)("input",{type:"text",id:"authCode",value:s.authCode,onChange:c,required:!0})]}),(0,r.jsx)("button",{type:"submit",disabled:d,children:d?"Submitting...":"Submit"})]})]})}var l=s(3054),d=s.n(l);function h(e){let{posts:t=[],loading:s,error:i,onRefresh:o}=e;return s?(0,r.jsx)("div",{className:d().loading,children:"Loading posts..."}):i?(0,r.jsxs)("div",{className:d().error,children:["Error: ",i]}):(0,r.jsxs)("div",{className:d().container,children:[(0,r.jsxs)("div",{className:d().header,children:[(0,r.jsx)("h2",{children:"Posts"}),(0,r.jsx)("button",{onClick:o,children:"Refresh"})]}),t&&0!==t.length?(0,r.jsx)("ul",{className:d().list,children:t.map(e=>(0,r.jsxs)("li",{className:d().post,children:[(0,r.jsx)("h3",{children:e.title}),(0,r.jsx)("p",{children:e.body}),(0,r.jsx)("small",{children:new Date(e.createdAt).toLocaleString()})]},e.id))}):(0,r.jsx)("p",{children:"No posts available"})]})}function c(){return(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"Post Submission"}),(0,r.jsx)(a,{}),(0,r.jsx)("h2",{children:"Posts"}),(0,r.jsx)(h,{})]})}},9320:e=>{e.exports={container:"PostForm_container__VfnrM",error:"PostForm_error__7uEKE",formGroup:"PostForm_formGroup__nXLvL"}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(2936)),_N_E=e.O()}]);